---
# Main bootstrap orchestrator
# Imports all other playbooks in the correct order

- name: Dotfiles Bootstrap - Complete System Setup
  hosts: all
  gather_facts: true

  pre_tasks:
    - name: Require host limit
      ansible.builtin.fail:
        msg: |
          You must specify a target host with -l <hostname>.
          Available hosts: work-laptop, pentest-laptop, home-desktop, work-desktop
          Example: ansible-playbook playbooks/bootstrap.yml -l work-desktop -K
      when: ansible_limit is not defined
      run_once: true

  tasks:
    - name: Display bootstrap information
      ansible.builtin.debug:
        msg: "Starting bootstrap on {{ ansible_distribution }} {{ ansible_distribution_version }}"

- import_playbook: 00-setup.yml
- import_playbook: 01-packages.yml
- import_playbook: 02-pentesting.yml
- import_playbook: 03-config.yml
